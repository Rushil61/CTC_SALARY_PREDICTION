# -*- coding: utf-8 -*-
"""CTC/SALARY_PREDICT.ipynb

Automatically generated by Colaboratory.

Original file is located at
    https://colab.research.google.com/drive/1d-bZdWFRLM6Yda1Ojd4bT2pmPBeMIIjH

# ***IMPORTING LIBRARIES AND DATASET***
"""

#Importing libraries

import numpy as np
import pandas as pd
import matplotlib.pyplot as plt
import seaborn as sns
from sklearn.linear_model import LinearRegression
from sklearn.metrics import mean_squared_error

data = pd.read_excel('/content/Data_file (1).xlsx', header = 2)
test = pd.read_excel('/content/Test_data_file (1).xlsx')

data.shape

test.shape

"""# ***Data preprocessing***"""

data.describe()

data.info()

data.isnull().sum()

data.head()

data = data.drop('S.No.',axis=1)

sns.set_style(style='darkgrid')
sns.pairplot(data)

data = pd.get_dummies(data,drop_first = True)

data.head(5)

sns.heatmap(data.corr(),cmap='crest',linecolor='red',annot=True)

test.describe()

test.head()

test = test.drop(['College_T1','College_T2','Role_Manager','City_Metro' ,'Predicted CTC','Unnamed: 13', 'Unnamed: 14','Unnamed: 15','Unnamed: 16','Unnamed: 17','Unnamed: 18','Unnamed: 19','Unnamed: 20','Unnamed: 21','Unnamed: 22','Unnamed: 23'],axis=1)

test.rename(columns={'previous CTC': 'Previous CTC','Exp':'Exp (Months)','previous job changes':'Previous job changes'},inplace=True)

test.head()

test = pd.get_dummies(test,drop_first=True)

test.head()

"""# ***SPLITTING THE DATASET INTO TRAIN AND TEST***"""

x_train = data.drop('CTC',axis=1)
y_train = data['CTC']

x_test = test.drop('Actual CTC',axis=1)
y_test = test['Actual CTC']

print(x_test.shape)

"""# ***MODEL FITTING***"""

model = LinearRegression()
model.fit(x_train,y_train)

y_pred = model.predict(x_test)

"""# ***MODEL EVALUATION***"""

print("Mean Squared Error =", mean_squared_error(y_test,y_pred))

predicted_data= pd.concat([test , pd.DataFrame(y_pred, columns= [ 'Previous CTC'])],axis=1)
predicted_data= predicted_data[['College_Tier 2','College_Tier 3','City type_Non-Metro','Previous job changes','Graduation marks','Exp (Months)','Role_Manager']]
predicted_data